<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Flipbook</title>
    <!-- jQuery (with fallback) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        if (typeof jQuery === 'undefined') {
            // If jQuery fails to load from CDN, try local file
            document.write('<script src="js/jquery-3.6.0.min.js"><\/script>');
        }
    </script>
    <!-- Turn.js (with fallback) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
    <script>
        if (typeof $.fn.turn === 'undefined') {
            // If Turn.js fails to load from CDN, try local file
            document.write('<script src="js/turn.min.js"><\/script>');
        }
    </script>
    <audio id="flipSound" src="images/page-flip-47177.mp3" preload="auto"></audio>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #1a1a1a;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: 'Georgia', serif;
            padding: 20px;
            color: #fff;
            cursor: pointer;
        }

        .flipbook-container {
            width: 1000px;
            height: 700px;
            margin: 20px auto;
            position: relative;
            background: #2a2a2a;
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
            overflow: visible;
            border-radius: 10px;
            padding: 20px;
        }

        #book {
            width: 1000px;
            height: 700px;
            margin: auto;
            background: #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            cursor: pointer;
        }

        .page {
            width: 500px;
            height: 700px;
            background: #fff;
            background-size: 100% 100%;
            overflow: hidden;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.1);
            position: relative;
            transition: all 0.3s ease;
        }

        .page img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
            pointer-events: none;
            background: #fff;
        }

        .hard {
            background: #2a2a2a;
            color: #fff;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            overflow: hidden;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.3);
            position: relative;
        }

        .hard.p1 {
            background: #1a1a1a;
            color: white;
        }

        .hard.p2 {
            background: #1a1a1a;
            color: white;
        }

        .hard img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            pointer-events: none;
        }

        .page-number {
            position: absolute;
            bottom: 15px;
            font-size: 14px;
            color: #666;
            font-family: 'Georgia', serif;
            background: rgba(255,255,255,0.8);
            padding: 5px 10px;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1;
        }

        .page-number.left {
            left: 15px;
        }

        .page-number.right {
            right: 15px;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: white;
            font-size: 24px;
            font-family: 'Georgia', serif;
        }
    </style>
</head>
<body>
    <div class="loading">Loading Flipbook...</div>
    
    <div class="flipbook-container">
    <div id="book">
        <div class="page">
            <img src="images\Artboard 28.jpg" alt="Page 1" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">1</div>
        </div>
        <div class="page">
            <img src="images/30-min.jpg" alt="Page 2" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">2</div>
        </div>
        <div class="page">
            <img src="images/31-min.jpg" alt="Page 3" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">3</div>
        </div>
        <div class="page">
            <img src="images/32-min.jpg" alt="Page 4" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">4</div>
        </div>
        <div class="page">
            <img src="images/33-min.jpg" alt="Page 5" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">5</div>
        </div>
        <div class="page">
            <img src="images/34-min.jpg" alt="Page 6" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">6</div>
        </div>
        <div class="page">
            <img src="images/35-min.jpg" alt="Page 7" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">7</div>
        </div>
        <div class="page">
            <img src="images/36-min.jpg" alt="Page 8" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">8</div>
        </div>
        <div class="page">
            <img src="images/38-min.jpg" alt="Page 9" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">9</div>
        </div>
        <div class="page">
            <img src="images/39-min.jpg" alt="Page 10" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">10</div>
        </div>
        <div class="page">
            <img src="images/40-min.jpg" alt="Page 11" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">11</div>
        </div>
        <div class="page">
            <img src="images/41-min.jpg" alt="Page 12" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">12</div>
        </div>
        <div class="page">
            <img src="images/42-min.jpg" alt="Page 13" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">13</div>
        </div>
        <div class="page">
            <img src="images/Artboard 1-min.jpg" alt="Page 14" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">14</div>
        </div>
        <div class="page">
            <img src="images/Artboard 4-min.jpg" alt="Page 15" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">15</div>
        </div>
        <div class="page">
            <img src="images/Artboard 6-min.jpg" alt="Page 16" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">16</div>
        </div>
        <div class="page">
            <img src="images/Artboard 7-min.jpg" alt="Page 17" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">17</div>
        </div>
        <div class="page">
            <img src="images/Artboard 9-min.jpg" alt="Page 18" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">18</div>
        </div>
        <div class="page">
            <img src="images/Artboard 12-min.jpg" alt="Page 19" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">19</div>
        </div>
        <div class="page">
            <img src="images/Artboard 13-min.jpg" alt="Page 20" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">20</div>
        </div>
        <div class="page">
            <img src="images/Artboard 14-min.jpg" alt="Page 21" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">21</div>
        </div>
        <div class="page">
            <img src="images/Artboard 15-min.jpg" alt="Page 22" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">22</div>
        </div>
        <div class="page">
            <img src="images/Artboard 16-min.jpg" alt="Page 23" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">23</div>
        </div>
        <div class="page">
            <img src="images/Artboard 17-min.jpg" alt="Page 24" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">24</div>
        </div>
        <div class="page">
            <img src="images/Artboard 19-min.jpg" alt="Page 25" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">25</div>
        </div>
        <div class="page">
            <img src="images/Artboard 20-min.jpg" alt="Page 26" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">26</div>
        </div>
        <div class="page">
            <img src="images/Artboard 23-min.jpg" alt="Page 27" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">27</div>
        </div>
        <div class="page">
            <img src="images/Artboard 24-min.jpg" alt="Page 28" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number left">28</div>
        </div>
        <div class="page">
            <img src="images/Artboard 26-min.jpg" alt="Page 29" style="width: 100%; height: 100%; object-fit: contain;">
            <div class="page-number right">29</div>
        </div>
        <div class="page">
            <img src="images/Artboard 27-min.jpg" alt="Back Cover" style="width: 100%; height: 100%; object-fit: cover;">
            <div class="page-number left">30</div>
        </div>
    </div>
</div>


    <script>
        function initializeBook() {
            const book = $("#book");
            const flipSound = document.getElementById('flipSound');
            let soundEnabled = true;

            // Preload images
            const images = book.find('img');
            let loadedImages = 0;
            const totalImages = images.length;

            images.each(function() {
                const img = new Image();
                img.onload = function() {
                    loadedImages++;
                    if (loadedImages === totalImages) {
                        $('.loading').fadeOut();
                        initializeTurn();
                    }
                };
                img.onerror = function() {
                    console.error('Failed to load image:', this.src);
                    loadedImages++;
                    if (loadedImages === totalImages) {
                        $('.loading').fadeOut();
                        initializeTurn();
                    }
                };
                img.src = $(this).attr('src');
            });

            function initializeTurn() {
                let isTurning = false;

                try {
                    book.turn({
                        width: 1000,
                        height: 700,
                        autoCenter: true,
                        display: 'double',
                        elevation: 50,
                        gradients: true,
                        duration: 1200,
                        when: {
                            turning: function(e, page, view) {
                                isTurning = true;
                                if (flipSound) {
                                    try {
                                        flipSound.currentTime = 0;
                                        const playPromise = flipSound.play();
                                        if (playPromise !== undefined) {
                                            playPromise.catch(error => {
                                                console.log('Sound play failed:', error);
                                            });
                                        }
                                    } catch (e) {
                                        console.error('Sound error:', e);
                                    }
                                }
                            },
                            turned: function(e, page, view) {
                                isTurning = false;
                                localStorage.setItem('currentPage', page);
                            }
                        }
                    });

                    // Restore saved page after initialization
                    const savedPage = localStorage.getItem('currentPage');
                    if (savedPage) {
                        book.turn('page', parseInt(savedPage));
                    }

                    // Click navigation
                    book.on('click', function(e) {
                        if (isTurning) return;

                        const bookWidth = book.width();
                        const clickX = e.pageX - book.offset().left;

                        if (clickX > bookWidth / 2) {
                            book.turn('next');
                        } else {
                            book.turn('previous');
                        }
                    });

                    // Keyboard navigation
                    $(document).keydown(function(e) {
                        if (isTurning) return;
                        if (e.key === "ArrowRight") book.turn('next');
                        else if (e.key === "ArrowLeft") book.turn('previous');
                    });

                    // Enable sound after first user interaction
                    $(document).one('click', function() {
                        if (flipSound) {
                            flipSound.play().catch(e => console.log('Initial sound play failed:', e));
                        }
                    });

                } catch (e) {
                    console.error("Turn.js initialization error:", e);
                    alert('Error initializing the flipbook. Please refresh the page and try again.');
                }
            }
        }

        // Initialize on window load
        $(window).on('load', function() {
            initializeBook();
        });
    </script>
</body>
</html>
